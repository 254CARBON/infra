apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - ../../base
  - ../../platform/clickhouse
  - ../../platform/postgresql
  - ../../platform/redis
  - ../../platform/kafka
  - ../../platform/minio
  - ../../platform/keycloak
  - ../../platform/mlflow
  - ../../platform/metrics-stack
  - ../../platform/otel
  - ../../platform/ingress-nginx
  - ../../platform/backup-jobs
  - ../../platform/backports
  - ../../platform/kyverno
  - ../../platform/gatekeeper
  - ../../platform/trivy-operator

labels:
  - pairs:
      environment: staging
      app.kubernetes.io/managed-by: "kustomize"

patches:
  - path: staging-patches.yaml

patchesStrategicMerge:
  - argocd-labels.yaml
